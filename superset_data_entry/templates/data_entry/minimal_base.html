{% extends "appbuilder/baselayout.html" %}

{# Critical layout CSS so it applies even if external stylesheet loads late or fails #}
{% block head_css %}
{{ super() }}
<style type="text/css">
  body:has(.data-entry-plugin-root) { overflow-x: hidden; max-width: 100vw; padding-top: 0; }
  .data-entry-plugin-root .container-fluid,
  .data-entry-plugin-root .container { max-width: 100%; padding-left: 1rem; padding-right: 1rem; }
  .data-entry-plugin-root .container-fluid { padding-top: 1.25rem; }
  /* Hide the top navbar completely on data-entry plugin pages */
  body:has(.data-entry-plugin-root) .navbar { display: none !important; }
</style>
{% endblock %}

{# No top navbar on data-entry pages #}
{% block navbar %}
<nav class="navbar navbar-inverse navbar-fixed-top data-entry-nav-hidden" role="navigation" style="display: none !important;">
</nav>
{% endblock %}

{# Mark plugin page for CSS; no extra nav bar or duplicate Home #}
{% block tail_js %}
{{ super() }}
<script{% if csp_nonce is defined %} nonce="{{ csp_nonce() }}"{% endif %}>
(function() {
    function markPluginPage() { document.body.classList.add('data-entry-plugin-page'); }
    function hideNavbar() {
        var navbar = document.querySelector('.navbar');
        if (navbar) {
            navbar.style.setProperty('display', 'none', 'important');
        }
    }
    function init() {
        markPluginPage();
        hideNavbar();
    }
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            init();
            setTimeout(hideNavbar, 50);
        });
    } else {
        init();
        setTimeout(hideNavbar, 50);
    }
})();
</script>
{% endblock %}
